<?xml version="1.0" encoding="UTF-8"?>
<model modelUID="r:00000000-0000-4000-0000-011c895905aa(jetbrains.mps.ypath.typesystem)">
  <persistence version="3" />
  <refactoringHistory />
  <language namespace="7866978e-a0f0-4cc7-81bc-4d213d9375e1(jetbrains.mps.lang.smodel)" />
  <language namespace="f3061a53-9226-4cc5-a443-f952ceaf5816(jetbrains.mps.baseLanguage)" />
  <language namespace="7a5dda62-9140-4668-ab76-d5ed1746f2b2(jetbrains.mps.lang.typesystem)" />
  <language namespace="83888646-71ce-4f1c-9c53-c54016f6ad4f(jetbrains.mps.baseLanguage.collections)" />
  <language namespace="d4e445fa-e1ac-4fc8-8d3b-e62b05d0ea4c(jetbrains.mps.ypath)" />
  <language namespace="3a13115c-633c-4c5c-bbcc-75c4219e9555(jetbrains.mps.lang.quotation)" />
  <language namespace="ceab5195-25ea-4f22-9b92-103b95ca8c0c(jetbrains.mps.lang.core)" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902fb(jetbrains.mps.lang.smodel.constraints)" version="21" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590301(jetbrains.mps.lang.smodel.structure)" version="16" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902c1(jetbrains.mps.baseLanguage.constraints)" version="83" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ca(jetbrains.mps.baseLanguage.structure)" version="1" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ae(jetbrains.mps.lang.typesystem.constraints)" version="17" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590328(jetbrains.mps.baseLanguage.collections.constraints)" version="6" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959032e(jetbrains.mps.baseLanguage.collections.structure)" version="4" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895905a8(jetbrains.mps.ypath.constraints)" version="49" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959030d(jetbrains.mps.lang.constraints.structure)" version="1" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590338(jetbrains.mps.baseLanguage.closures.structure)" version="3" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590340(jetbrains.mps.lang.pattern.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959028c(jetbrains.mps.lang.structure.constraints)" version="11" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590334(jetbrains.mps.baseLanguage.closures.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590283(jetbrains.mps.lang.core.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895903e4(jetbrains.mps.internal.collections.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902db(jetbrains.mps.baseLanguage.blTypes.constraints)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590292(jetbrains.mps.lang.structure.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959033d(jetbrains.mps.lang.annotations.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959034b(jetbrains.mps.lang.quotation.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902b4(jetbrains.mps.lang.typesystem.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895903fe(jetbrains.mps.baseLanguage.strings.constraints)" version="1" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590402(jetbrains.mps.baseLanguage.strings.structure)" version="9" />
  <maxImportIndex value="21" />
  <import index="1" modelUID="r:00000000-0000-4000-0000-011c895905ae(jetbrains.mps.ypath.structure)" version="12" />
  <import index="2" modelUID="f:java_stub#java.lang(java.lang@java_stub)" version="-1" />
  <import index="3" modelUID="r:00000000-0000-4000-0000-011c895902ca(jetbrains.mps.baseLanguage.structure)" version="1" />
  <import index="14" modelUID="r:00000000-0000-4000-0000-011c895905a8(jetbrains.mps.ypath.constraints)" version="49" />
  <import index="15" modelUID="r:00000000-0000-4000-0000-011c8959032e(jetbrains.mps.baseLanguage.collections.structure)" version="4" />
  <import index="16" modelUID="f:java_stub#jetbrains.mps.ypath.runtime(jetbrains.mps.ypath.runtime@java_stub)" version="-1" />
  <import index="17" modelUID="r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)" version="0" />
  <import index="20" modelUID="f:java_stub#jetbrains.mps.generator.template(jetbrains.mps.generator.template@java_stub)" version="-1" />
  <import index="21" modelUID="r:00000000-0000-4000-0000-011c895905a7(jetbrains.mps.ypath.behavior)" version="-1" />
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551166971">
    <property name="name" value="typeof_TreePathType" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551166972">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208128035">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208128036">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208128037">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1178551166975">
              <link role="applicableNode" targetNodeId="1178551166883" resolveInfo="tptype" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208128038">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1178551166974">
            <link role="applicableNode" targetNodeId="1178551166883" resolveInfo="tptype" />
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166883">
      <property name="name" value="tptype" />
      <link role="concept" targetNodeId="1.1168428529658" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551166976">
    <property name="name" value="typeof_TreePathCreator" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551166977">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1184578650090">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558193">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184578650091">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184578650092">
              <link role="applicableNode" targetNodeId="1178551166884" resolveInfo="tpCreator" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558194">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227913167">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184578650095">
              <link role="applicableNode" targetNodeId="1178551166884" resolveInfo="tpCreator" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184578650096">
              <link role="link" targetNodeId="1.1179235945873" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166884">
      <property name="name" value="tpCreator" />
      <link role="concept" targetNodeId="1.1168428603688" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167020">
    <property name="name" value="typeof_TreePathAspect" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167021">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1184578634206">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558195">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184578634207">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184578634208">
              <link role="applicableNode" targetNodeId="1178551166888" resolveInfo="aspect" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558196">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227899922">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184578634210">
              <link role="applicableNode" targetNodeId="1178551166888" resolveInfo="aspect" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184578634211">
              <link role="link" targetNodeId="1.1179235945873" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166888">
      <property name="name" value="aspect" />
      <link role="concept" targetNodeId="1.1168879975004" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167042">
    <property name="name" value="typeof_TreePathAdapterExpression" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167043">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1190288659521">
        <property name="name" value="ExpType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1190288669877">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1190288673743">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1190288673744">
            <link role="typeVarDeclaration" targetNodeId="1190288659521" resolveInfo="ExpType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1190288685889">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1190288685890">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227909967">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1190288687807">
                <link role="applicableNode" targetNodeId="1178551166890" resolveInfo="exp" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1190288690514">
                <link role="link" targetNodeId="1.1168890213786" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1196166747478">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1196166747479">
          <property name="name" value="treePathType" />
          <property name="isFinal" value="true" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196166747480">
            <link role="concept" targetNodeId="1.1168428529658" resolveInfo="TreePathType" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227881172">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227942298">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196166649810">
                <link role="applicableNode" targetNodeId="1178551166890" resolveInfo="exp" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196166654064">
                <link role="link" targetNodeId="1.1168890235188" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196166656968">
              <link role="link" targetNodeId="1.1179235945873" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1196715469310">
        <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1196715469311">
          <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595290">
            <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595293">
              <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595295">
                <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196715484414">
                  <link role="applicableNode" targetNodeId="1178551166890" resolveInfo="exp" />
                </node>
              </node>
            </node>
            <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595297">
              <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779275655">
                <node role="quotedNode" type="jetbrains.mps.ypath.structure.TreePathType" id="1196779275656">
                  <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779275657">
                    <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779275691">
                      <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779275692">
                        <link role="typeVarDeclaration" targetNodeId="1190288659521" resolveInfo="ExpType" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227899278">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227911109">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196715472346">
              <link role="variableDeclaration" targetNodeId="1196166747479" resolveInfo="treePathType" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196715475339">
              <link role="link" targetNodeId="1.1168428551640" />
            </node>
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1196715477160" />
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateLessThanInequationStatement" id="1225552004404">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225552007919">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225552007920">
            <link role="typeVarDeclaration" targetNodeId="1190288659521" resolveInfo="ExpType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225552021486">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225552022853">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225552022854">
              <link role="variableDeclaration" targetNodeId="1196166747479" resolveInfo="treePathType" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225552022855">
              <link role="link" targetNodeId="1.1168428551640" />
            </node>
          </node>
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225552039782">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225552039300">
            <link role="applicableNode" targetNodeId="1178551166890" resolveInfo="exp" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225552041000">
            <link role="link" targetNodeId="1.1168890213786" />
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225552051837">
          <property name="value" value="Incompatible type" />
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166890">
      <property name="name" value="exp" />
      <link role="concept" targetNodeId="1.1168890168054" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167070">
    <property name="name" value="typeof_TreePathOperationExpression" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167071">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1184588345401">
        <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184588345402">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1184839711123">
            <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1184839711124">
              <property name="name" value="op" />
              <property name="isFinal" value="true" />
              <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1184839711125">
                <link role="concept" targetNodeId="1.1168524996431" />
              </node>
              <node role="initializer" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="1184839723266">
                <link role="concept" targetNodeId="1.1168524996431" />
                <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227847276">
                  <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184839704641">
                    <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                  </node>
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184839707550">
                    <link role="link" targetNodeId="1.1168468671991" />
                  </node>
                </node>
              </node>
            </node>
          </node>
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1184839698354">
            <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184839698355">
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1184842207805">
                <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184842207806">
                  <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1186145333005">
                    <property name="name" value="SourceType" />
                  </node>
                  <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1186145347351">
                    <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1186145349932">
                      <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1186145349933">
                        <link role="typeVarDeclaration" targetNodeId="1186145333005" resolveInfo="SourceType" />
                      </node>
                    </node>
                    <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1186145352981">
                      <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1186145352982">
                        <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227943622">
                          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1186145354874">
                            <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1186145360160">
                            <link role="link" targetNodeId="1.1168468622494" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                  <node role="statement" type="jetbrains.mps.lang.typesystem.structure.WhenConcreteStatement" id="1186145326892">
                    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1186145326893">
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1186145368537">
                        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1186145368538">
                          <property name="name" value="targetType" />
                          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1186145368539">
                            <link role="concept" targetNodeId="3.1068431790189" />
                          </node>
                          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.StaticMethodCall" id="1186145368540">
                            <link role="classConcept" targetNodeId="14.1184790036011" />
                            <link role="baseMethodDeclaration" targetNodeId="14.1184790049968" />
                            <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227941573">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1186145377791">
                                <link role="variableDeclaration" targetNodeId="1184839711124" resolveInfo="op" />
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196269259015">
                                <link role="link" targetNodeId="1.1184147586245" />
                              </node>
                            </node>
                            <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227904853">
                              <node role="operand" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="1186145443888">
                                <link role="concept" targetNodeId="1.1168428529658" />
                                <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1186145440418">
                                  <link role="typeVarDeclaration" targetNodeId="1186145333005" resolveInfo="SourceType" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1186145368545">
                                <link role="link" targetNodeId="1.1168428551640" />
                              </node>
                            </node>
                            <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227946124">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227832657">
                                <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1194378230884">
                                  <link role="variableDeclaration" targetNodeId="1184839711124" resolveInfo="op" />
                                </node>
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194378233816">
                                  <link role="link" targetNodeId="1.1184776023529" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1194378237205">
                                <link role="baseMethodDeclaration" targetNodeId="21.1213877312166" resolveInfo="getParameterValue" />
                              </node>
                            </node>
                          </node>
                        </node>
                      </node>
                      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1196269826366">
                        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227838997">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196269833989">
                            <link role="variableDeclaration" targetNodeId="1186145368538" resolveInfo="targetType" />
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1196269837982" />
                        </node>
                        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1196269841602">
                          <property name="value" value="Received null target type" />
                        </node>
                        <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196269911224">
                          <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                        </node>
                      </node>
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1196269919358">
                        <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1196269919359">
                          <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595143">
                            <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595146">
                              <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595148">
                                <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196269933859">
                                  <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                                </node>
                              </node>
                            </node>
                            <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595150">
                              <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779275709">
                                <node role="quotedNode" type="jetbrains.mps.ypath.structure.TreePathType" id="1196779275710">
                                  <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779275711">
                                    <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779275714">
                                      <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196779275715">
                                        <link role="variableDeclaration" targetNodeId="1186145368538" resolveInfo="targetType" />
                                      </node>
                                    </node>
                                  </node>
                                </node>
                              </node>
                            </node>
                          </node>
                        </node>
                        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227945204">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196269924781">
                            <link role="variableDeclaration" targetNodeId="1186145368538" resolveInfo="targetType" />
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1196269926654" />
                        </node>
                      </node>
                    </node>
                    <node role="argument" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1186145363864">
                      <link role="typeVarDeclaration" targetNodeId="1186145333005" resolveInfo="SourceType" />
                    </node>
                  </node>
                </node>
                <node role="condition" type="jetbrains.mps.baseLanguage.structure.NotEqualsExpression" id="1184842679693">
                  <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.NullLiteral" id="1184842690910" />
                  <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227919475">
                    <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227934348">
                      <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1184842209549">
                        <link role="variableDeclaration" targetNodeId="1184839711124" resolveInfo="op" />
                      </node>
                      <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184842211850">
                        <link role="link" targetNodeId="1.1184776023529" />
                      </node>
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="1184842676795">
                      <link role="property" targetNodeId="17.1169194664001" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
            <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227959029">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227921348">
                <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1184839729256">
                  <link role="variableDeclaration" targetNodeId="1184839711124" resolveInfo="op" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184839732376">
                  <link role="link" targetNodeId="1.1184147586245" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="1184839735334">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1184839737857">
                  <link role="conceptDeclaration" targetNodeId="1.1184659060758" />
                </node>
              </node>
            </node>
            <node role="ifFalseStatement" type="jetbrains.mps.baseLanguage.structure.BlockStatement" id="1184839741784">
              <node role="statements" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184839741785">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1196942439191">
                  <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1196942439192">
                    <property name="name" value="treePath" />
                    <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196942439193">
                      <link role="concept" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                    </node>
                    <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227849140">
                      <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196942426076">
                        <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                      </node>
                      <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1196942431842">
                        <link role="baseMethodDeclaration" targetNodeId="21.1213877496973" resolveInfo="getTreePath" />
                      </node>
                    </node>
                  </node>
                </node>
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1196942458923">
                  <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1196942458924">
                    <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595324">
                      <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595327">
                        <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595329">
                          <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196942487055">
                            <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                          </node>
                        </node>
                      </node>
                      <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595331">
                        <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227936985">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196942478400">
                            <link role="variableDeclaration" targetNodeId="1196942439192" resolveInfo="treePath" />
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196942481949">
                            <link role="link" targetNodeId="1.1179235945873" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                  <node role="condition" type="jetbrains.mps.baseLanguage.structure.NotEqualsExpression" id="1196942468360">
                    <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.NullLiteral" id="1196942469875" />
                    <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196942465132">
                      <link role="variableDeclaration" targetNodeId="1196942439192" resolveInfo="treePath" />
                    </node>
                  </node>
                  <node role="ifFalseStatement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1196942498551">
                    <node role="condition" type="jetbrains.mps.baseLanguage.structure.BooleanConstant" id="1196942507742">
                      <property name="value" value="false" />
                    </node>
                    <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1196942511489">
                      <property name="value" value="No treepath found" />
                    </node>
                    <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196942529411">
                      <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227881170">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227905461">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184588347029">
              <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184789722728">
              <link role="link" targetNodeId="1.1168468671991" />
            </node>
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="1184588362266">
            <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1184588367094">
              <link role="conceptDeclaration" targetNodeId="1.1168524996431" />
            </node>
          </node>
        </node>
        <node role="ifFalseStatement" type="jetbrains.mps.baseLanguage.structure.BlockStatement" id="1184588370491">
          <node role="statements" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184588370492">
            <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1184588384882">
              <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558199">
                <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184588387870">
                  <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184588392177">
                    <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                  </node>
                </node>
              </node>
              <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558200">
                <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184588395631">
                  <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227905230">
                    <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184588399546">
                      <link role="applicableNode" targetNodeId="1178551166891" resolveInfo="tpoe" />
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184588402650">
                      <link role="link" targetNodeId="1.1168468622494" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166891">
      <property name="name" value="tpoe" />
      <link role="concept" targetNodeId="1.1168468602533" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167090">
    <property name="name" value="typeof_TreePathOperation" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167091">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1178551167092">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1178551166894">
          <property name="name" value="parent" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1178551167093" />
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227925549">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1178551167095">
              <link role="applicableNode" targetNodeId="1178551166893" resolveInfo="op" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetParentOperation" id="1178551167096" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.MatchStatement" id="1178551167097">
        <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1178551167098">
          <link role="variableDeclaration" targetNodeId="1178551166894" resolveInfo="parent" />
        </node>
        <node role="item" type="jetbrains.mps.lang.typesystem.structure.MatchStatementItem" id="1178551167099">
          <node role="condition" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166895">
            <property name="name" value="exp" />
            <link role="concept" targetNodeId="1.1168468602533" />
          </node>
          <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167100">
            <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1178551167101">
              <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558202">
                <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1178551167102">
                  <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1178551167103">
                    <link role="applicableNode" targetNodeId="1178551166893" resolveInfo="op" />
                  </node>
                </node>
              </node>
              <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558203">
                <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1178551167104">
                  <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1178551167105">
                    <link role="applicableNode" targetNodeId="1178551166895" resolveInfo="exp" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="ifFalseStatement" type="jetbrains.mps.lang.typesystem.structure.ReportErrorStatement" id="1190288908359">
          <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1190288911015">
            <property name="value" value="Error in model structure: wrong parent type" />
          </node>
          <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1190288948805">
            <link role="applicableNode" targetNodeId="1178551166893" resolveInfo="op" />
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166893">
      <property name="name" value="op" />
      <link role="concept" targetNodeId="1.1168468681335" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167116">
    <property name="name" value="typeOf_LambdaMethodParameter" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167117">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1178551166899">
        <property name="name" value="T" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1179327739073">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558205">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1179327748294">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1223208210064">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1179327750609">
                <link role="applicableNode" targetNodeId="1178551166896" resolveInfo="parameter" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1223208212056">
                <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1223208212057">
                  <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1223208215483">
                    <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558204">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779275716">
            <node role="quotedNode" type="jetbrains.mps.ypath.structure.TreePathType" id="1196779275717">
              <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779275718">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779275721">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779275722">
                    <link role="typeVarDeclaration" targetNodeId="1178551166899" resolveInfo="T" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1179326842470">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558207">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1179326844784">
            <link role="typeVarDeclaration" targetNodeId="1178551166899" resolveInfo="T" />
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558206">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1179326834794">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1179326836390">
              <link role="applicableNode" targetNodeId="1178551166896" resolveInfo="parameter" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166896">
      <property name="name" value="parameter" />
      <link role="concept" targetNodeId="1.1168428709096" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178551167139">
    <property name="name" value="typeof_TreeNodeKind" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178551167140">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1184316270386">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558209">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184316290748">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1223208703526">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184316293906">
                <link role="applicableNode" targetNodeId="1178551166901" resolveInfo="kind" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1223208704883">
                <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1223208704884">
                  <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1223208707348">
                    <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558208">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1184316264005">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184316265991">
              <link role="applicableNode" targetNodeId="1178551166901" resolveInfo="kind" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178551166901">
      <property name="name" value="kind" />
      <link role="concept" targetNodeId="1.1172240563057" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1178552953819">
    <property name="name" value="typeof_TreeNodeKindProperty" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1178552953820">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1190288835157">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1190288840925">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1190288840926">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1190288843155">
              <link role="applicableNode" targetNodeId="1178552964793" resolveInfo="prop" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1190288859998">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1190288859999">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1223208714881">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1190288862039">
                <link role="applicableNode" targetNodeId="1178552964793" resolveInfo="prop" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1223208716474">
                <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1223208716475">
                  <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1223208718323">
                    <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1178552964793">
      <property name="name" value="prop" />
      <link role="concept" targetNodeId="1.1175160940972" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.SubtypingRule" id="1179400179122">
    <property name="name" value="TreePathType_extends_SequenceType" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1179400179123">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.ReturnStatement" id="1179400204165">
        <node role="expression" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779275723">
          <node role="quotedNode" type="jetbrains.mps.baseLanguage.collections.structure.SequenceType" id="1196779275724">
            <node role="elementType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779275725">
              <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779275730">
                <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227914125">
                  <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196779275732">
                    <link role="applicableNode" targetNodeId="1179400193532" resolveInfo="treepath" />
                  </node>
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196779275733">
                    <link role="link" targetNodeId="1.1168428551640" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1179400193532">
      <property name="name" value="treepath" />
      <link role="concept" targetNodeId="1.1168428529658" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1179740437546">
    <property name="name" value="typeof_TreeNodeKindReference" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1179740437547">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1179740556071">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558211">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276001">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1196779276002">
              <link role="classifier" targetNodeId="16.~IFilter" resolveInfo="IFilter" />
              <node role="parameter" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1196779276003">
                <link role="classifier" targetNodeId="2.~Object" resolveInfo="Object" />
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276010">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227919122">
                    <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227901225">
                      <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196779276013">
                        <link role="applicableNode" targetNodeId="1179740445523" resolveInfo="treeNodeKindReference" />
                      </node>
                      <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196779276014">
                        <link role="link" targetNodeId="1.1179740217128" />
                      </node>
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1196779276015">
                      <link role="baseMethodDeclaration" targetNodeId="21.1213877481303" resolveInfo="getNodeType" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558210">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1179740518224">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1179740552969">
              <link role="applicableNode" targetNodeId="1179740445523" resolveInfo="treeNodeKindReference" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1179740445523">
      <property name="name" value="treeNodeKindReference" />
      <link role="concept" targetNodeId="1.1179740189248" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1180009341534">
    <property name="package" value="treeOperation.visit" />
    <property name="name" value="typeof_VisitNodesStatement" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1180009341535">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1180009898513">
        <property name="name" value="T" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateLessThanInequationStatement" id="1180009374907">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558213">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276016">
            <node role="quotedNode" type="jetbrains.mps.ypath.structure.TreePathType" id="1196779276017">
              <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1196779276018">
                <link role="classifier" targetNodeId="2.~Object" resolveInfo="Object" />
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276021">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276022">
                    <link role="typeVarDeclaration" targetNodeId="1180009898513" resolveInfo="T" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558212">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1180009367649">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227913525">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227929149">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180009369808">
                  <link role="applicableNode" targetNodeId="1180009355457" resolveInfo="visitNodesStatement" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1180025493342">
                  <link role="link" targetNodeId="1.1180024958680" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1180009551829">
                <link role="link" targetNodeId="1.1180009041864" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1180009862290">
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558215">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1180009865622">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227943801">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227840578">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180009867642">
                  <link role="applicableNode" targetNodeId="1180009355457" resolveInfo="visitNodesStatement" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1180025522604">
                  <link role="link" targetNodeId="1.1180024958680" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1180009871375">
                <link role="link" targetNodeId="1.1180009041864" />
              </node>
            </node>
          </node>
        </node>
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558214">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1180009856000">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180009857519">
              <link role="applicableNode" targetNodeId="1180009355457" resolveInfo="visitNodesStatement" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1180009355457">
      <property name="name" value="visitNodesStatement" />
      <link role="concept" targetNodeId="1.1180024940230" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1180014353958">
    <property name="package" value="treeOperation.visit" />
    <property name="name" value="check_VisitChildrenExpression" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1180014353959">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1180014469842">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180014469843">
          <property name="name" value="actualCount" />
          <node role="type" type="jetbrains.mps.baseLanguage.structure.IntegerType" id="1180014469844" />
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227897739">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227944780">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180014449906">
                <link role="applicableNode" targetNodeId="1180014362992" resolveInfo="visitChildrenExpression" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkListAccess" id="1180014454541">
                <link role="link" targetNodeId="1.1180014148583" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.LinkList_GetCountOperation" id="1180014460690" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1180014677598">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180014677599">
          <property name="name" value="visitBlock" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1180014677600">
            <link role="concept" targetNodeId="1.1180006635472" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227880773">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180014478963">
              <link role="applicableNode" targetNodeId="1180014362992" resolveInfo="visitChildrenExpression" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1180014850838">
              <link role="baseMethodDeclaration" targetNodeId="21.1213877259423" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1180014856089">
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227927661">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014858967">
            <link role="variableDeclaration" targetNodeId="1180014677599" resolveInfo="visitBlock" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1180014862163" />
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1180014864930">
          <property name="value" value="visit children is unexpected here" />
        </node>
        <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180014880792">
          <link role="applicableNode" targetNodeId="1180014362992" resolveInfo="visitChildrenExpression" />
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1180025403821">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180025403822">
          <property name="name" value="parameters" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeListType" id="1180025403823">
            <link role="elementConcept" targetNodeId="1.1180013705438" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227880372">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227894144">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014677616">
                <link role="variableDeclaration" targetNodeId="1180014677599" resolveInfo="visitBlock" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1180025336356">
                <link role="link" targetNodeId="1.1180025154301" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkListAccess" id="1180025341305">
              <link role="link" targetNodeId="1.1180025054224" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1180014515625">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180014515626">
          <property name="name" value="expectedCount" />
          <node role="type" type="jetbrains.mps.baseLanguage.structure.IntegerType" id="1180014515627" />
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1217625333073">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180025403824">
              <link role="variableDeclaration" targetNodeId="1180025403822" resolveInfo="parameters" />
            </node>
            <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.GetSizeOperation" id="1180025416814" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1180014444793">
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="1180014558308">
          <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="1180014562979">
            <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="1180014604218">
              <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014606206">
                <link role="variableDeclaration" targetNodeId="1180014469843" resolveInfo="actualCount" />
              </node>
              <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1180014564788">
                <property name="value" value=" , actual " />
              </node>
            </node>
            <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014560741">
              <link role="variableDeclaration" targetNodeId="1180014515626" resolveInfo="expectedCount" />
            </node>
          </node>
          <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1180014539448">
            <property name="value" value="wrong parameters number: expected " />
          </node>
        </node>
        <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180014628203">
          <link role="applicableNode" targetNodeId="1180014362992" resolveInfo="visitChildrenExpression" />
        </node>
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.EqualsExpression" id="1180014526108">
          <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014527427">
            <link role="variableDeclaration" targetNodeId="1180014515626" resolveInfo="expectedCount" />
          </node>
          <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014524391">
            <link role="variableDeclaration" targetNodeId="1180014469843" resolveInfo="actualCount" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.MultipleForeachLoop" id="1180014646129">
        <node role="loopVariable" type="jetbrains.mps.lang.typesystem.structure.MultipleForeachLoopVariable" id="1180014646130">
          <node role="variable" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180014646131">
            <property name="name" value="arg" />
            <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1180014651316" />
          </node>
          <node role="iterable" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227904735">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1180014661420">
              <link role="applicableNode" targetNodeId="1180014362992" resolveInfo="visitChildrenExpression" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkListAccess" id="1180014665726">
              <link role="link" targetNodeId="1.1180014148583" />
            </node>
          </node>
        </node>
        <node role="loopVariable" type="jetbrains.mps.lang.typesystem.structure.MultipleForeachLoopVariable" id="1180014685284">
          <node role="variable" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1180014685285">
            <property name="name" value="param" />
            <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1180014687752" />
          </node>
          <node role="iterable" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180025431423">
            <link role="variableDeclaration" targetNodeId="1180025403822" resolveInfo="parameters" />
          </node>
        </node>
        <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1180014646134">
          <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateLessThanInequationStatement" id="1180014737422">
            <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558217">
              <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1180014739452">
                <node role="term" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014741217">
                  <link role="variableDeclaration" targetNodeId="1180014685285" resolveInfo="param" />
                </node>
              </node>
            </node>
            <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1185805558216">
              <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1180014730654">
                <node role="term" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1180014732215">
                  <link role="variableDeclaration" targetNodeId="1180014646131" resolveInfo="arg" />
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1180014362992">
      <property name="name" value="visitChildrenExpression" />
      <link role="concept" targetNodeId="1.1180011113930" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1183981904324">
    <property name="name" value="typeof_NodeFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1183981904325">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208184294">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208184295">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208184296">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1183982586796">
              <link role="applicableNode" targetNodeId="1183981924297" resolveInfo="param" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208184297">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227885975">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227916483">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227883586">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1183982589859">
                  <link role="applicableNode" targetNodeId="1183981924297" resolveInfo="param" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1183981994628">
                  <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1183981994629">
                    <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635334">
                      <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                    </node>
                  </node>
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1183981994626">
                <link role="link" targetNodeId="1.1179235945873" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1183981994624">
              <link role="link" targetNodeId="1.1168428551640" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1183981924297">
      <property name="name" value="param" />
      <link role="concept" targetNodeId="1.1183978789889" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1183982067966">
    <property name="name" value="typeof_IndexFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1183982067967">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208188306">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208188307">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208188308">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1183982578851">
              <link role="applicableNode" targetNodeId="1183982102510" resolveInfo="index" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208188309">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276023">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.IntegerType" id="1196779276024" />
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1183982102510">
      <property name="name" value="index" />
      <link role="concept" targetNodeId="1.1183978827781" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1183982133352">
    <property name="name" value="typeof_ValueFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1183982133353">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595250">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595253">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595255">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1183982611971">
              <link role="applicableNode" targetNodeId="1183982146119" resolveInfo="value" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595257">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227896737">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227845233">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227936924">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1183982603939">
                  <link role="applicableNode" targetNodeId="1183982146119" resolveInfo="value" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1183982175554">
                  <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1183982178105">
                    <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635186">
                      <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                    </node>
                  </node>
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1183982188251">
                <link role="link" targetNodeId="1.1179235945873" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1183982190297">
              <link role="link" targetNodeId="1.1168428551640" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1183982146119">
      <property name="name" value="value" />
      <link role="concept" targetNodeId="1.1183978852670" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1184605969663">
    <property name="name" value="typeof_NodeTypeFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184605969664">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1196721446569">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1196721446570">
          <property name="name" value="nodeType" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196721446571">
            <link role="concept" targetNodeId="3.1068431790189" resolveInfo="Type" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227851300">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227897323">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227893369">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184606119762">
                  <link role="applicableNode" targetNodeId="1184605983955" resolveInfo="nodeType" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1184606121734">
                  <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1184606130207">
                    <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635141">
                      <link role="conceptDeclaration" targetNodeId="1.1179235924605" resolveInfo="TreePath" />
                    </node>
                  </node>
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184606142441">
                <link role="link" targetNodeId="1.1179235945873" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184606145958">
              <link role="link" targetNodeId="1.1168428551640" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208178730">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208178731">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208178732">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196762384624">
              <link role="applicableNode" targetNodeId="1184605983955" resolveInfo="nodeType" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208178733">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276025">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196779276026">
              <node role="referenceAntiquotation$link_attribute$concept" type="jetbrains.mps.lang.quotation.structure.ReferenceAntiquotation" id="1196779276031">
                <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227896402">
                  <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196779276033">
                    <link role="variableDeclaration" targetNodeId="1196721446570" resolveInfo="nodeType" />
                  </node>
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetConceptOperation" id="1196779276034" />
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1184605983955">
      <property name="name" value="nodeToCheck" />
      <link role="concept" targetNodeId="1.1184593479323" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1184674360691">
    <property name="name" value="typeof_ParamFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1184674360692">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208173110">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208173111">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208173112">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184674450079">
              <link role="applicableNode" targetNodeId="1184674372584" resolveInfo="param" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208173113">
          <node role="normalType" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227865631">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227878422">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1184674434262">
                <link role="applicableNode" targetNodeId="1184674372584" resolveInfo="param" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1184674436345">
                <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1184674438415">
                  <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635361">
                    <link role="conceptDeclaration" targetNodeId="1.1184659060758" resolveInfo="IParamFeature" />
                  </node>
                </node>
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1184674446976">
              <link role="link" targetNodeId="1.1184659264134" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1184674372584">
      <property name="name" value="param" />
      <link role="concept" targetNodeId="1.1184501940146" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1192620484340">
    <property name="name" value="typeof_ExpressionFunctionParam" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1192620484341">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223208192095">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208192096">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223208192097">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1192620810919">
              <link role="applicableNode" targetNodeId="1192620494666" resolveInfo="expressionFunctionParam" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223208192098">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276035">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196779276036">
              <link role="concept" targetNodeId="3.1068431790191" resolveInfo="Expression" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1192620494666">
      <property name="name" value="expressionFunctionParam" />
      <link role="concept" targetNodeId="1.1192620437851" resolveInfo="ExpressionFunctionParam" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194184639840">
    <property name="name" value="typeof_WritePathExpression" />
    <property name="package" value="writePath" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194184639841">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194622400622">
        <property name="name" value="nodeType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194622400623">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622400624">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276052">
            <node role="quotedNode" type="jetbrains.mps.ypath.structure.TreePathType" id="1196779276053">
              <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276054">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276057">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276058">
                    <link role="typeVarDeclaration" targetNodeId="1194622400622" resolveInfo="nodeType" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622400630">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194622400631">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227865680">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622400634">
                <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622400633">
                <link role="link" targetNodeId="1.1194013242049" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1194622411284">
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227865791">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227905279">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411289">
              <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411288">
              <link role="link" targetNodeId="1.1194013217171" />
            </node>
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1194622411286" />
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1194622411290">
          <property name="value" value="Feature is not selected" />
        </node>
        <node role="nodeToReport" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227851719">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411293">
            <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411292">
            <link role="link" targetNodeId="1.1194013217171" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1194622411294">
        <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194622411295">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1194622411296">
            <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194622411297">
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1194795672402">
                <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1194795672403">
                  <property name="name" value="targetType" />
                  <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1194795672404" />
                  <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227920794">
                    <node role="operand" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="1194622411313">
                      <link role="concept" targetNodeId="1.1184659060758" resolveInfo="IParamFeature" />
                      <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227852776">
                        <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411316">
                          <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411315">
                          <link role="link" targetNodeId="1.1194013217171" />
                        </node>
                      </node>
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1194622411307">
                      <link role="baseMethodDeclaration" targetNodeId="21.1213877340252" resolveInfo="getTargetType" />
                      <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227886337">
                        <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227883665">
                          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411312">
                            <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411311">
                            <link role="link" targetNodeId="1.1194180532459" />
                          </node>
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411309">
                          <link role="link" targetNodeId="1.1190213718970" />
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1194795689073">
                <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194795689074">
                  <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1200673331317">
                    <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1200673335270">
                      <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1200673335271">
                        <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1200673336636">
                          <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                        </node>
                      </node>
                    </node>
                    <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1200673360256">
                      <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1200673360257">
                        <node role="quotedNode" type="jetbrains.mps.ypath.structure.WritePathType" id="1200673363361">
                          <node role="targetType" type="jetbrains.mps.baseLanguage.structure.Type" id="1200673363362">
                            <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1200673363363">
                              <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1200673363364">
                                <link role="variableDeclaration" targetNodeId="1194795672403" resolveInfo="targetType" />
                              </node>
                            </node>
                          </node>
                          <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1200673363365">
                            <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1200673363366">
                              <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1200673363367">
                                <link role="typeVarDeclaration" targetNodeId="1194622400622" resolveInfo="nodeType" />
                              </node>
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
                <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227909888">
                  <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1194795693912">
                    <link role="variableDeclaration" targetNodeId="1194795672403" resolveInfo="targetType" />
                  </node>
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1194795699348" />
                </node>
              </node>
            </node>
            <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227837128">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227924815">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411323">
                  <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411322">
                  <link role="link" targetNodeId="1.1194013217171" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="1194622411319">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1194622411320">
                  <link role="conceptDeclaration" targetNodeId="1.1184659060758" resolveInfo="IParamFeature" />
                </node>
              </node>
            </node>
            <node role="ifFalseStatement" type="jetbrains.mps.baseLanguage.structure.BlockStatement" id="1194622411324">
              <node role="statements" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194622411325">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1194795717899">
                  <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1194795717900">
                    <property name="name" value="targetType" />
                    <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1194795717901" />
                    <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227938093">
                      <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227934085">
                        <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411338">
                          <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411337">
                          <link role="link" targetNodeId="1.1194013217171" />
                        </node>
                      </node>
                      <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1194622411335">
                        <link role="baseMethodDeclaration" targetNodeId="21.1213877499617" resolveInfo="getTargetType" />
                      </node>
                    </node>
                  </node>
                </node>
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1194795734620">
                  <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227846901">
                    <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1194795740000">
                      <link role="variableDeclaration" targetNodeId="1194795717900" resolveInfo="targetType" />
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1194795743495" />
                  </node>
                  <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194795734622">
                    <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1200673373497">
                      <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1200673376663">
                        <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1200673376664">
                          <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1200673378855">
                            <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
                          </node>
                        </node>
                      </node>
                      <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1200673382355">
                        <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1200673382356">
                          <node role="quotedNode" type="jetbrains.mps.ypath.structure.WritePathType" id="1200673386120">
                            <node role="targetType" type="jetbrains.mps.baseLanguage.structure.Type" id="1200673386121">
                              <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1200673386122">
                                <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1200673386123">
                                  <link role="variableDeclaration" targetNodeId="1194795717900" resolveInfo="targetType" />
                                </node>
                              </node>
                            </node>
                            <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1200673386124">
                              <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1200673386125">
                                <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1200673386126">
                                  <link role="typeVarDeclaration" targetNodeId="1194622400622" resolveInfo="nodeType" />
                                </node>
                              </node>
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227921401">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227958958">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622411344">
              <link role="applicableNode" targetNodeId="1194184639842" resolveInfo="wpe" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622411343">
              <link role="link" targetNodeId="1.1194013217171" />
            </node>
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1194622411341" />
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194184639842">
      <property name="name" value="wpe" />
      <link role="concept" targetNodeId="1.1194013204484" resolveInfo="WritePathExpression" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194435345143">
    <property name="name" value="check_IndexAnchor" />
    <property name="package" value="writePath" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194435345144">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194435365394">
        <property name="name" value="anchType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194435372456">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194435375814">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1194435381923">
            <link role="typeVarDeclaration" targetNodeId="1194435365394" resolveInfo="anchType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194435385505">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194435385506">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227920104">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194435387217">
                <link role="applicableNode" targetNodeId="1194435345145" resolveInfo="anch" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194435452628">
                <link role="link" targetNodeId="1.1194700181003" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateLessThanInequationStatement" id="1225551583034">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551587763">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551587764">
            <link role="typeVarDeclaration" targetNodeId="1194435365394" resolveInfo="anchType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551592196">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1225551592197">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.IntegerType" id="1225551595485" />
          </node>
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225551609083">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225551608111">
            <link role="applicableNode" targetNodeId="1194435345145" resolveInfo="anch" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225551609752">
            <link role="link" targetNodeId="1.1194700181003" />
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225551611734">
          <property name="value" value="Integer expression expected" />
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194435345145">
      <property name="name" value="anch" />
      <link role="concept" targetNodeId="1.1194435322566" resolveInfo="IndexAnchor" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194436208642">
    <property name="name" value="check_ElementAnchor" />
    <property name="package" value="writePath" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194436208643">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194622474426">
        <property name="name" value="nodeType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194622474427">
        <property name="name" value="targetType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194622474428">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622474429">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276120">
            <node role="quotedNode" type="jetbrains.mps.ypath.structure.WritePathType" id="1196779276121">
              <node role="targetType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276122">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276128">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276129">
                    <link role="typeVarDeclaration" targetNodeId="1194622474427" resolveInfo="targetType" />
                  </node>
                </node>
              </node>
              <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276125">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276130">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276131">
                    <link role="typeVarDeclaration" targetNodeId="1194622474426" resolveInfo="nodeType" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622474438">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194622474439">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227937803">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227925077">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622474445">
                  <link role="applicableNode" targetNodeId="1194436208644" resolveInfo="anch" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1194622474443">
                  <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1194622474444">
                    <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635139">
                      <link role="conceptDeclaration" targetNodeId="1.1194007636117" resolveInfo="WritePathStatement" />
                    </node>
                  </node>
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622474441">
                <link role="link" targetNodeId="1.1194183840736" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194622489577">
        <property name="name" value="elmType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194622489578">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622489579">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1194622489580">
            <link role="typeVarDeclaration" targetNodeId="1194622489577" resolveInfo="elmType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194622489581">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194622489582">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227891014">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194622489585">
                <link role="applicableNode" targetNodeId="1194436208644" resolveInfo="anch" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194622489584">
                <link role="link" targetNodeId="1.1194700181003" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateLessThanInequationStatement" id="1225551157018">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551158504">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551158505">
            <link role="typeVarDeclaration" targetNodeId="1194622489577" resolveInfo="elmType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551164776">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551164777">
            <link role="typeVarDeclaration" targetNodeId="1194622474427" resolveInfo="targetType" />
          </node>
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225551173751">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225551172353">
            <link role="applicableNode" targetNodeId="1194436208644" resolveInfo="anch" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225551174019">
            <link role="link" targetNodeId="1.1194700181003" />
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225551183894">
          <property name="value" value="Incompatible type" />
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194436208644">
      <property name="name" value="anch" />
      <link role="concept" targetNodeId="1.1194435898264" resolveInfo="ElementAnchor" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194610632927">
    <property name="name" value="typeof_RangeFunctionParam" />
    <property name="package" value="treePath.features.functions.params" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194610632928">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595167">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595170">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595172">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194610658454">
              <link role="applicableNode" targetNodeId="1194610632929" resolveInfo="range" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595174">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276132">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196779276133">
              <link role="concept" targetNodeId="1.1194568341931" resolveInfo="IRange" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194610632929">
      <property name="name" value="range" />
      <link role="concept" targetNodeId="1.1194610572276" resolveInfo="RangeFunctionParam" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194610759972">
    <property name="name" value="typeof_ReplaceExpressionFunctionParam" />
    <property name="package" value="treePath.features.functions.params" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194610759973">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595349">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595352">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595354">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194610789292">
              <link role="applicableNode" targetNodeId="1194610759974" resolveInfo="rexp" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595356">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276134">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196779276135">
              <link role="concept" targetNodeId="3.1068431790191" resolveInfo="Expression" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194610759974">
      <property name="name" value="rexp" />
      <link role="concept" targetNodeId="1.1194610690988" resolveInfo="ReplaceExpressionFunctionParam" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194616629875">
    <property name="name" value="typeof_IsWithinRangeExpression" />
    <property name="package" value="writePath.range" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194616629876">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194798650785">
        <property name="name" value="rangeType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194798650786">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194798650787">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1194798650788">
            <link role="typeVarDeclaration" targetNodeId="1194798650785" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194798650789">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194798650790">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227906206">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194798650793">
                <link role="applicableNode" targetNodeId="1194616629877" resolveInfo="exp" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194798654997">
                <link role="link" targetNodeId="1.1194616616051" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595192">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595195">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595197">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194798650808">
              <link role="applicableNode" targetNodeId="1194616629877" resolveInfo="exp" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595199">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276138">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.BooleanType" id="1196779276139" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateStrongLessThanInequationStatement" id="1225551896359">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551903141">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551903142">
            <link role="typeVarDeclaration" targetNodeId="1194798650785" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551913719">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1225551915174">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225551915175">
              <link role="concept" targetNodeId="1.1194568341931" resolveInfo="IRange" />
            </node>
          </node>
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225551926301">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225551925856">
            <link role="applicableNode" targetNodeId="1194616629877" resolveInfo="exp" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225551927959">
            <link role="link" targetNodeId="1.1194616616051" />
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225551936391">
          <property name="value" value="node&lt;IRange&gt; expected" />
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194616629877">
      <property name="name" value="exp" />
      <link role="concept" targetNodeId="1.1194616547141" resolveInfo="IsWithinRangeExpression" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194796650758">
    <property name="name" value="typeof_IsAtInsertionPointExpression" />
    <property name="package" value="writePath.range" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194796650759">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194798627574">
        <property name="name" value="rangeType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194798627575">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194798627576">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1194798627577">
            <link role="typeVarDeclaration" targetNodeId="1194798627574" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194798627578">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194798627579">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227893558">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194798627582">
                <link role="applicableNode" targetNodeId="1194796650760" resolveInfo="exp" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194798635016">
                <link role="link" targetNodeId="1.1194796475264" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595201">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595204">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595206">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194798627598">
              <link role="applicableNode" targetNodeId="1194796650760" resolveInfo="exp" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595208">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276142">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.BooleanType" id="1196779276143" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateStrongLessThanInequationStatement" id="1225551812181">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551814737">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551814738">
            <link role="typeVarDeclaration" targetNodeId="1194798627574" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551825567">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1225551826784">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225551826785">
              <link role="concept" targetNodeId="1.1194568341931" resolveInfo="IRange" />
            </node>
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225551843074">
          <property name="value" value="node&lt;IRange&gt; expected" />
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225551852966">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225551851870">
            <link role="applicableNode" targetNodeId="1194796650760" resolveInfo="exp" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225551855281">
            <link role="link" targetNodeId="1.1194796475264" />
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194796650760">
      <property name="name" value="exp" />
      <link role="concept" targetNodeId="1.1194796453748" resolveInfo="IsAtInsertionPointExpression" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1194796795170">
    <property name="name" value="check_NextElementStatement" />
    <property name="package" value="writePath.range" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1194796795171">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1194796849775">
        <property name="name" value="rangeType" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1194796856881">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194796858856">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1194796858857">
            <link role="typeVarDeclaration" targetNodeId="1194796849775" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1194796862094">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1194796862095">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227842591">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1194796863744">
                <link role="applicableNode" targetNodeId="1194796795172" resolveInfo="exp" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1194796869073">
                <link role="link" targetNodeId="1.1194796712440" />
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateStrongLessThanInequationStatement" id="1225551666736">
        <property name="checkOnly" value="true" />
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551669040">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1225551669041">
            <link role="typeVarDeclaration" targetNodeId="1194796849775" resolveInfo="rangeType" />
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1225551686744">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1225551688062">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225551688063">
              <link role="concept" targetNodeId="1.1194568341931" resolveInfo="IRange" />
            </node>
          </node>
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225551705567">
          <property name="value" value="node&lt;IRange&gt; expected" />
        </node>
        <node role="nodeToCheck" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225551711921">
          <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225551710048">
            <link role="applicableNode" targetNodeId="1194796795172" resolveInfo="stmt" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225551712863">
            <link role="link" targetNodeId="1.1194796712440" />
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1194796795172">
      <property name="name" value="stmt" />
      <link role="concept" targetNodeId="1.1194796699421" resolveInfo="NextElementExpression" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1195421069746">
    <property name="name" value="typeof_InsertExpressionFunctionParam" />
    <property name="package" value="treePath.features.functions.params" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1195421069747">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595373">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595376">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595378">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1195421087151">
              <link role="applicableNode" targetNodeId="1195421069748" resolveInfo="insExp" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595380">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276146">
            <node role="quotedNode" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196779276147">
              <link role="concept" targetNodeId="3.1068431790191" resolveInfo="Expression" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1195421069748">
      <property name="name" value="insExp" />
      <link role="concept" targetNodeId="1.1195421010025" resolveInfo="InsertExpressionFunctionParam" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1196172032596">
    <property name="name" value="typeof_EmptySequenceExpression" />
    <property name="package" value="writePath" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1196172032597">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1196172135898">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1196172135899">
          <property name="name" value="rwps" />
          <property name="isFinal" value="true" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1196172135900">
            <link role="concept" targetNodeId="1.1194621189019" resolveInfo="ReplaceWritePathStatement" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227915941">
            <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196172122492">
              <link role="applicableNode" targetNodeId="1196172032598" resolveInfo="ese" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="1196172125702">
              <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1196172127802">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1217631635295">
                  <link role="conceptDeclaration" targetNodeId="1.1194621189019" resolveInfo="ReplaceWritePathStatement" />
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1196172142453">
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227926311">
          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196172146766">
            <link role="variableDeclaration" targetNodeId="1196172135899" resolveInfo="rwps" />
          </node>
          <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsNotNullOperation" id="1196172148338" />
        </node>
        <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1196172150589">
          <property name="value" value="Can only be used within a REPLACE statement" />
        </node>
        <node role="nodeToReport" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196172173014">
          <link role="applicableNode" targetNodeId="1196172032598" resolveInfo="ese" />
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1196172251499">
        <property name="name" value="foo" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.TypeVarDeclaration" id="1196172304786">
        <property name="name" value="bar" />
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1196172251500">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1196172251501">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1196172287914">
            <node role="term" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1204227848804">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1196172290922">
                <link role="variableDeclaration" targetNodeId="1196172135899" resolveInfo="rwps" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1196172293292">
                <link role="link" targetNodeId="1.1194183840736" />
              </node>
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1196172297058">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276148">
            <node role="quotedNode" type="jetbrains.mps.ypath.structure.WritePathType" id="1196779276149">
              <node role="targetType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276150">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276156">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276157">
                    <link role="typeVarDeclaration" targetNodeId="1196172304786" resolveInfo="bar" />
                  </node>
                </node>
              </node>
              <node role="nodeType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276153">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276158">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276159">
                    <link role="typeVarDeclaration" targetNodeId="1196172251499" resolveInfo="foo" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595315">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595318">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595320">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196172353999">
              <link role="applicableNode" targetNodeId="1196172032598" resolveInfo="ese" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595322">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276160">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.collections.structure.SequenceType" id="1196779276161">
              <node role="elementType" type="jetbrains.mps.baseLanguage.structure.Type" id="1196779276162">
                <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1196779276165">
                  <node role="expression" type="jetbrains.mps.lang.typesystem.structure.TypeVarReference" id="1196779276166">
                    <link role="typeVarDeclaration" targetNodeId="1196172304786" resolveInfo="bar" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1196172032598">
      <property name="name" value="ese" />
      <link role="concept" targetNodeId="1.1195686097730" resolveInfo="EmptySequenceExpression" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.InferenceRule" id="1196768348563">
    <property name="name" value="typeof_GeneratorFunctionParam" />
    <property name="package" value="treePath.features.functions.params" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1196768348564">
      <node role="statement" type="jetbrains.mps.lang.typesystem.structure.CreateEquationStatement" id="1223982595225">
        <node role="leftExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595228">
          <node role="normalType" type="jetbrains.mps.lang.typesystem.structure.TypeOfExpression" id="1223982595230">
            <node role="term" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1196768384990">
              <link role="applicableNode" targetNodeId="1196768348565" resolveInfo="nodeToCheck" />
            </node>
          </node>
        </node>
        <node role="rightExpression" type="jetbrains.mps.lang.typesystem.structure.NormalTypeClause" id="1223982595232">
          <node role="normalType" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1196779276182">
            <node role="quotedNode" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1196779276183">
              <link role="classifier" targetNodeId="20.~ITemplateGenerator" resolveInfo="ITemplateGenerator" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1196768348565">
      <property name="name" value="nodeToCheck" />
      <link role="concept" targetNodeId="1.1196768299101" resolveInfo="GeneratorFunctionParam" />
    </node>
  </node>
  <node type="jetbrains.mps.lang.typesystem.structure.NonTypesystemRule" id="1225553003517">
    <property name="package" value="writePath" />
    <property name="name" value="check_ExpressionWritePathStatement" />
    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1225553003518">
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1225553068220">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1225553068221">
          <property name="name" value="writePathType" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225553068222">
            <link role="concept" targetNodeId="1.1194182910610" resolveInfo="WritePathType" />
          </node>
          <node role="initializer" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="1225553091802">
            <link role="concept" targetNodeId="1.1194182910610" resolveInfo="WritePathType" />
            <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553085461">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553083924">
                <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225553082567">
                  <link role="applicableNode" targetNodeId="1225553032788" resolveInfo="ewps" />
                </node>
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225553084262">
                  <link role="link" targetNodeId="1.1194183840736" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.typesystem.structure.Node_TypeOperation" id="1225553087720" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1225553151812">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1225553151813">
          <property name="name" value="exprType" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225553151814" />
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553168465">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553151815">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225553151816">
                <link role="applicableNode" targetNodeId="1225553032788" resolveInfo="ewps" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225553151817">
                <link role="link" targetNodeId="1.1194187847981" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.lang.typesystem.structure.Node_TypeOperation" id="1225553169494" />
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1225553230748">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1225553230749">
          <property name="name" value="nodeType" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225553230750">
            <link role="concept" targetNodeId="3.1068431790189" resolveInfo="Type" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553230751">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553230752">
              <link role="variableDeclaration" targetNodeId="1225553068221" resolveInfo="writePathType" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225553230753">
              <link role="link" targetNodeId="1.1194188619952" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1225553238567">
        <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1225553238568">
          <property name="name" value="targetType" />
          <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1225553238569">
            <link role="concept" targetNodeId="3.1068431790189" resolveInfo="Type" />
          </node>
          <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553238570">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553238571">
              <link role="variableDeclaration" targetNodeId="1225553068221" resolveInfo="writePathType" />
            </node>
            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225553238572">
              <link role="link" targetNodeId="1.1194357856748" />
            </node>
          </node>
        </node>
      </node>
      <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1225553155600">
        <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1225553155601">
          <node role="statement" type="jetbrains.mps.lang.typesystem.structure.AssertStatement" id="1225553155602">
            <node role="condition" type="jetbrains.mps.lang.typesystem.structure.IsSubtypeExpression" id="1225553155603">
              <node role="subtypeExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553155673">
                <link role="variableDeclaration" targetNodeId="1225553151813" resolveInfo="exprType" />
              </node>
              <node role="supertypeExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553231875">
                <link role="variableDeclaration" targetNodeId="1225553230749" resolveInfo="nodeType" />
              </node>
            </node>
            <node role="errorString" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1225553155606">
              <property name="value" value="Incompatible types" />
            </node>
            <node role="nodeToReport" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1225553155607">
              <node role="operand" type="jetbrains.mps.lang.typesystem.structure.ApplicableNodeReference" id="1225553155608">
                <link role="applicableNode" targetNodeId="1225553032788" resolveInfo="ewps" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1225553155609">
                <link role="link" targetNodeId="1.1194187847981" />
              </node>
            </node>
          </node>
        </node>
        <node role="condition" type="jetbrains.mps.baseLanguage.structure.NotExpression" id="1225553155610">
          <node role="expression" type="jetbrains.mps.lang.typesystem.structure.IsStrongSubtypeExpression" id="1225553155611">
            <node role="subtypeExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553155683">
              <link role="variableDeclaration" targetNodeId="1225553151813" resolveInfo="exprType" />
            </node>
            <node role="supertypeExpression" type="jetbrains.mps.lang.quotation.structure.Quotation" id="1225553155613">
              <node role="quotedNode" type="jetbrains.mps.baseLanguage.collections.structure.SequenceType" id="1225553155614">
                <node role="elementType" type="jetbrains.mps.baseLanguage.structure.Type" id="1225553155615">
                  <node role="_attr_$attribute" type="jetbrains.mps.lang.quotation.structure.Antiquotation" id="1225553155616">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1225553238883">
                      <link role="variableDeclaration" targetNodeId="1225553238568" resolveInfo="targetType" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="applicableNode" type="jetbrains.mps.lang.typesystem.structure.ConceptReference" id="1225553032788">
      <property name="name" value="ewps" />
      <link role="concept" targetNodeId="1.1194187790800" resolveInfo="ExpressionWritePathStatement" />
    </node>
  </node>
</model>

