package jetbrains.mps.lang.editor.contextAssistant.testLanguage.editor;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.transformationMenus.TransformationMenuBase;
import java.util.List;
import jetbrains.mps.lang.editor.transformationMenus.MenuPart;
import java.util.Arrays;
import jetbrains.mps.lang.editor.transformationMenus.ConditionalMenuPart;
import jetbrains.mps.openapi.editor.transformationMenus.TransformationMenuContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.lang.editor.transformationMenus.ActionItemMenuPart;
import jetbrains.mps.lang.editor.transformationMenus.SubMenuMenuPart;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.smodel.action.SNodeFactoryOperations;
import jetbrains.mps.lang.editor.transformationMenus.IncludeMenuMenuPart;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.openapi.editor.transformationMenus.TransformationMenuLookup;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.lang.editor.transformationMenus.NamedMenuLookup;
import jetbrains.mps.smodel.language.LanguageRegistry;

public class Child_TransformationMenu extends TransformationMenuBase {
  @Override
  protected List<MenuPart> getParts() {
    return Arrays.<MenuPart>asList(new ConditionalMenuPart() {
      @Override
      protected boolean isApplicable(TransformationMenuContext _context) {
        if ("error".equals(SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")))) {
          throw new RuntimeException("Intentional exception - ignore this");
        }
        return true;
      }

      @Override
      protected List<MenuPart> getParts() {
        return Arrays.<MenuPart>asList(new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "exception 1";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
          }
        });
      }
    }, new ActionItemMenuPart() {
      @Override
      protected String getText(TransformationMenuContext _context) {
        return "exception 2";
      }

      @Override
      protected void execute(TransformationMenuContext _context) {
        throw new RuntimeException("Intentional exception from 'execute'");
      }
    }, new SubMenuMenuPart() {
      @Override
      protected String getText(TransformationMenuContext _context) {
        return "tree operations";
      }

      @Override
      protected List<MenuPart> getParts() {
        return Arrays.asList(new MenuPart[]{new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "delete node";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
            SNodeOperations.deleteNode(_context.getNode());
          }
        }, new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "add sibling before";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
            SNode newNode = SNodeFactoryOperations.createNewNode(SNodeFactoryOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x9a629f9aabc94c29L, 0xb1b8db7f349f7fbcL, 0x4d6a8b533e60aa32L, "jetbrains.mps.lang.editor.contextAssistant.testLanguage.structure.Child")), null);
            SNodeOperations.insertPrevSiblingChild(_context.getNode(), newNode);
            _context.getEditorContext().selectWRTFocusPolicy(newNode);
          }
        }});
      }
    }, new ConditionalMenuPart() {
      @Override
      protected boolean isApplicable(TransformationMenuContext _context) {
        return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")).contains("a");
      }

      @Override
      protected List<MenuPart> getParts() {
        return Arrays.<MenuPart>asList(new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "remove all 'a's";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
            SPropertyOperations.set(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"), SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")).replaceAll("a", ""));
          }
        }, new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "another ";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
          }
        });
      }
    }, new ConditionalMenuPart() {
      @Override
      protected boolean isApplicable(TransformationMenuContext _context) {
        return !(SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")).endsWith("a"));
      }

      @Override
      protected List<MenuPart> getParts() {
        return Arrays.<MenuPart>asList(new ActionItemMenuPart() {
          @Override
          protected String getText(TransformationMenuContext _context) {
            return "ensure name ends with 'a'";
          }

          @Override
          protected void execute(TransformationMenuContext _context) {
            SPropertyOperations.set(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"), SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")) + "a");
          }
        });
      }
    }, new IncludeMenuMenuPart() {
      @Nullable
      @Override
      protected TransformationMenuLookup getMenuLookup(TransformationMenuContext context) {
        final SNode node = context.getNode();
        final EditorContext editorContext = context.getEditorContext();

        return new NamedMenuLookup(LanguageRegistry.getInstance(editorContext.getRepository()), MetaAdapterFactory.getConcept(0x9a629f9aabc94c29L, 0xb1b8db7f349f7fbcL, 0x4d6a8b533e60aa32L, "jetbrains.mps.lang.editor.contextAssistant.testLanguage.structure.Child"), "jetbrains.mps.lang.editor.contextAssistant.testLanguage.editor.NamedMenu");
      }
    });
  }
}
