package jetbrains.mps.testActions.test;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest4;
import org.junit.Test;
import jetbrains.mps.lang.test.runtime.BaseTestBody;
import java.util.Set;
import jetbrains.mps.testActions.util.FlyingActionsFinder;
import junit.framework.Assert;

@MPSLaunch
public class ActionsTest_Test extends BaseTransformationTest4 {
  @Test
  public void test_checkRoots() throws Throwable {
    this.initTest("${mps_home}/MPS.mpr", "r:43a3062d-cf3d-40ad-9c9d-c7da54cc927b(jetbrains.mps.testActions.test)", true, true);
    this.runTest("jetbrains.mps.testActions.test.ActionsTest_Test$TestBody", "test_checkRoots", true);
  }

  @MPSLaunch
  public static class TestBody extends BaseTestBody {
    public void test_checkRoots() throws Exception {
      Set<String> flyingActions = FlyingActionsFinder.getAllFlyingActions();

      StringBuilder error = new StringBuilder("List of actions without parent or shortcut:");
      error.append(System.getProperty("line.separator"));
      for (String s : flyingActions) {
        error.append(s);
        error.append(System.getProperty("line.separator"));
      }
      error.append("To avoid error You can add shortcut, join action to some group or add to exception list of flying actions:");
      error.append(System.getProperty("line.separator"));
      for (String s : FlyingActionsFinder.getMPSRootActionIds()) {
        error.append(s);
        error.append(System.getProperty("line.separator"));
      }

      Assert.assertTrue(error.toString(), flyingActions.isEmpty());
    }
  }
}
