package jetbrains.mps.debugger.java.customViewers.plugin.plugin;

/*Generated by MPS */

import jetbrains.mps.plugins.custom.BaseCustomApplicationPlugin;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import java.util.List;
import jetbrains.mps.debugger.java.api.state.proxy.ValueWrapperFactory;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.debugger.java.api.state.customViewers.CustomViewersManager;

public class CustomViewersInitializer_CustomApplicationPlugin extends BaseCustomApplicationPlugin {
  protected static Log log = LogFactory.getLog(CustomViewersInitializer_CustomApplicationPlugin.class);

  private List<ValueWrapperFactory> myFactories = ListSequence.fromList(new ArrayList<ValueWrapperFactory>());

  public CustomViewersInitializer_CustomApplicationPlugin() {
  }

  public void doInit() {
    CustomViewersManager manager = CustomViewersManager.getInstance();
    if (manager != null) {
      {
        ValueWrapperFactory factory = new ListViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
      {
        ValueWrapperFactory factory = new MapEntryViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
      {
        ValueWrapperFactory factory = new MapViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
      {
        ValueWrapperFactory factory = new SetViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
      {
        ValueWrapperFactory factory = new IndexedTupleViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
      {
        ValueWrapperFactory factory = new SNodeViewer_WrapperFactory();
        ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).addElement(factory);
        manager.addFactory(factory);
      }
    }
  }

  public void doDispose() {
    CustomViewersManager manager = CustomViewersManager.getInstance();
    if (manager != null) {
      for (ValueWrapperFactory factory : ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).reversedList()) {
        manager.removeFactory(factory);
      }
    } else if (ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).isNotEmpty()) {
      if (log.isErrorEnabled()) {
        log.error("Cant find custom viewers manager while myFactories nonempty: " + CustomViewersInitializer_CustomApplicationPlugin.this.myFactories);
      }
    }
    ListSequence.fromList(CustomViewersInitializer_CustomApplicationPlugin.this.myFactories).clear();
  }
}
