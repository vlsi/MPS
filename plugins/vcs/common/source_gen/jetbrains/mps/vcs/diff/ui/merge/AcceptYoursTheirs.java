package jetbrains.mps.vcs.diff.ui.merge;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseAction;
import com.intellij.openapi.project.DumbAware;
import com.intellij.util.ui.EmptyIcon;
import com.intellij.openapi.actionSystem.AnActionEvent;
import java.util.Map;

public class AcceptYoursTheirs extends BaseAction implements DumbAware {
  private MergeModelsDialog myMergeModelsDialog;
  private boolean myAcceptMine;

  private AcceptYoursTheirs(MergeModelsDialog mergeModelsDialog, boolean acceptMine) {
    super("Accept " + ((acceptMine ?
      "Yours" :
      "Theirs"
    )), null, EmptyIcon.create(1));
    myMergeModelsDialog = mergeModelsDialog;
    myAcceptMine = acceptMine;
    setDisableOnNoProject(false);
  }

  protected void doExecute(AnActionEvent event, Map<String, Object> map) {
    myMergeModelsDialog.acceptVersionForSelectedRoots(myAcceptMine);
  }

  @Override
  protected void doUpdate(AnActionEvent event, Map<String, Object> map) {
    setEnabledState(event.getPresentation(), myMergeModelsDialog.isAcceptYoursTheirsEnabled());
  }

  @Override
  public boolean displayTextInToolbar() {
    return true;
  }

  public static AcceptYoursTheirs yoursInstance(MergeModelsDialog mergeModelsDialog) {
    return new AcceptYoursTheirs(mergeModelsDialog, true);
  }

  public static AcceptYoursTheirs theirsInstance(MergeModelsDialog mergeModelsDialog) {
    return new AcceptYoursTheirs(mergeModelsDialog, false);
  }
}
