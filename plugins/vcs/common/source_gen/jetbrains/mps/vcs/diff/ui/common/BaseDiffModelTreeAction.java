package jetbrains.mps.vcs.diff.ui.common;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseAction;
import com.intellij.openapi.project.DumbAware;
import javax.swing.Icon;
import com.intellij.openapi.actionSystem.AnActionEvent;
import java.util.Map;
import org.jetbrains.mps.openapi.model.SNodeId;
import com.intellij.openapi.util.Ref;

public abstract class BaseDiffModelTreeAction extends BaseAction implements DumbAware {
  public BaseDiffModelTreeAction(String text, Icon icon) {
    super(text, null, icon);
    setExecuteOutsideCommand(true);
    setDisableOnNoProject(false);
    setIsAlwaysVisible(false);
  }

  @Override
  protected void doUpdate(AnActionEvent event, Map<String, Object> map) {
    setEnabledState(event.getPresentation(), getRootIdRef(event) != null);
  }

  protected static SNodeId getRootId(AnActionEvent event) {
    return check_vfywar_a0a2(getRootIdRef(event));
  }

  private static Ref<SNodeId> getRootIdRef(AnActionEvent event) {
    return event.getData(DiffModelTree.NODE_ID_DATAKEY);
  }

  private static SNodeId check_vfywar_a0a2(Ref<SNodeId> checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.get();
    }
    return null;
  }
}
