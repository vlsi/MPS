package jetbrains.mps.build.util;

/*Generated by MPS */

import java.util.concurrent.ConcurrentMap;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.generator.template.TemplateQueryContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import java.util.concurrent.ConcurrentHashMap;

public class GenerationUtil {
  public static String SCRIPTS_TARGET_PROPERTY = GenerationUtil.class.getPackage().getName() + ".scripts.dir";

  public GenerationUtil() {
  }

  public static <K, V> ConcurrentMap<K, V> getSessionMap(SNode project, TemplateQueryContext genContext, String prefix) {
    String key = prefix + "/" + genContext.getOriginalInputModel().getLongName() + "/" + SPropertyOperations.getString(project, "name");
    ConcurrentMap<K, V> map = (ConcurrentMap<K, V>) genContext.getSessionObject(key);
    if (map == null) {
      map = new ConcurrentHashMap<K, V>();
      genContext.putSessionObject(key, map);
    }
    return map;
  }
}
