package jetbrains.mps.lang.editor.figures.constraints;

/*Generated by MPS */

import jetbrains.mps.scope.FilteringScope;
import org.jetbrains.mps.openapi.model.SModel;
import jetbrains.mps.scope.ModelPlusImportedScope;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.baseLanguage.behavior.Classifier_Behavior;
import jetbrains.mps.smodel.behaviour.BehaviorReflection;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.baseLanguage.behavior.ClassConcept_Behavior;

public class ExternalViewClassifierScope extends FilteringScope {
  private SModel myModel;
  public ExternalViewClassifierScope(SModel model) {
    super(new ModelPlusImportedScope(model, false, "jetbrains.mps.baseLanguage.structure.ClassConcept"));
    myModel = model;
  }
  @Override
  public boolean isExcluded(SNode node) {
    SNode classConcept = SNodeOperations.cast(node, "jetbrains.mps.baseLanguage.structure.ClassConcept");
    if (SNodeOperations.isInstanceOf(SLinkOperations.getTarget(classConcept, "visibility", true), "jetbrains.mps.baseLanguage.structure.PrivateVisibility")) {
      return true;
    }
    if (!(SNodeOperations.isInstanceOf(SLinkOperations.getTarget(classConcept, "visibility", true), "jetbrains.mps.baseLanguage.structure.PublicVisibility")) && SNodeOperations.getModel(classConcept) != myModel) {
      return true;
    }
    if (Classifier_Behavior.call_isInner_521412098689998677(classConcept) && !(BehaviorReflection.invokeVirtual(Boolean.TYPE, classConcept, "virtual_isStatic_7405920559687241224", new Object[]{}))) {
      return true;
    }
    return !(ListSequence.fromList(ClassConcept_Behavior.call_getAllSuperClassifiers_4892662966716545618(classConcept)).contains(SNodeOperations.getNode("f:java_stub#67b3c41d-58b3-4756-b971-30bf8a9d63e6#jetbrains.jetpad.projectional.view(jetbrains.jetpad/jetbrains.jetpad.projectional.view@java_stub)", "~View")));
  }
}
