package jetbrains.mps.ide.common;

/*Generated by MPS */

import jetbrains.mps.util.annotation.ToRemove;
import com.intellij.execution.impl.ConsoleViewImpl;
import com.intellij.openapi.project.Project;
import com.intellij.execution.filters.TextConsoleBuilder;
import com.intellij.execution.filters.TextConsoleBuilderFactory;
import com.intellij.execution.filters.Filter;
import com.intellij.openapi.extensions.Extensions;
import com.intellij.unscramble.AnalyzeStacktraceUtil;

/**
 * Use ConsoleCreator from j.m.e.configurations to create console and JavaStackTraceFilter from j.m.execution.lib to highlight stacktraces.
 */
@Deprecated
@ToRemove(version = 2.0)
public class JavaConsoleCreator {
  @Deprecated
  public JavaConsoleCreator() {
  }

  public static ConsoleViewImpl createConsoleView(Project project) {
    final TextConsoleBuilder builder = TextConsoleBuilderFactory.getInstance().createBuilder(project);
    for (Filter filter : Extensions.getExtensions(AnalyzeStacktraceUtil.EP_NAME, project)) {
      builder.addFilter(filter);
    }
    ConsoleViewImpl console = (ConsoleViewImpl) builder.getConsole();
    // next line is to fix MPS-16030 
    console.getComponent();
    return console;
  }
}
