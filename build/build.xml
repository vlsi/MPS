<project name="mps" default="build">
  <property name="mps.sign" location="sign"/>

  <property name="idea_home" location=".."/>

  <target name="platform">
    <ant antfile="ideaPlatform.xml" target="force-resolve" inheritAll="true" useNativeBasedir="true"/>
  </target>

  <target name="build" depends="platform, base, signed"/>

  <target name="base" depends="platform">
    <ant antfile="mpsDistribution.xml" inheritAll="true" useNativeBasedir="true">
      <target name="buildDependents"/>
      <target name="build"/>
    </ant>
  </target>

  <target name="signed" depends="base">
    <ant antfile="mpsExe.xml" inheritAll="true" useNativeBasedir="true"/>
    <ant antfile="${mps.sign}/mpsDmg.xml" inheritAll="true" useNativeBasedir="true"/>
  </target>

  <target name="clean">
    <delete dir="tmp"/>
    <delete dir="artifacts"/>
  </target>
</project>
